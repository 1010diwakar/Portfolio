import { useEffect, useState } from "react";

// ✅ This is a React component (no <!DOCTYPE html>), so it runs correctly in a React canvas.
// It keeps your previous design/features:
// - Gradient theme + consistent text colors
// - Autoplay testimonial slider with arrows & dots
// - Gallery with click-to-zoom modal
// - Appointment form wired for Formspree (replace endpoint)

const TESTIMONIALS = [
  {
    quote:
      "Dr. [Name] is very kind and attentive. She treated my child with utmost care.",
    author: "– Parent A",
  },
  {
    quote: "Highly professional and approachable. My kids are very comfortable with her.",
    author: "– Parent B",
  },
  {
    quote: "One of the best pediatricians we have met. Highly recommend.",
    author: "– Parent C",
  },
];

const GALLERY = [
  { src: "https://via.placeholder.com/800x600?text=Clinic+Photo", alt: "Clinic photo" },
  { src: "https://via.placeholder.com/800x600?text=With+Patients", alt: "With patients" },
  { src: "https://via.placeholder.com/800x600?text=Hospital+Event", alt: "Hospital event" },
];

export default function PediatricianPortfolio() {
  // --- Testimonial slider state ---
  const [index, setIndex] = useState(0);
  useEffect(() => {
    const id = setInterval(() => setIndex((i) => (i + 1) % TESTIMONIALS.length), 3000);
    return () => clearInterval(id);
  }, []);

  const goNext = () => setIndex((i) => (i + 1) % TESTIMONIALS.length);
  const goPrev = () => setIndex((i) => (i - 1 + TESTIMONIALS.length) % TESTIMONIALS.length);
  const goTo = (i: number) => setIndex(((i % TESTIMONIALS.length) + TESTIMONIALS.length) % TESTIMONIALS.length);

  // --- Gallery modal state ---
  const [modalSrc, setModalSrc] = useState<string | null>(null);
  useEffect(() => {
    const onKey = (e: KeyboardEvent) => {
      if (e.key === "Escape") setModalSrc(null);
    };
    window.addEventListener("keydown", onKey);
    return () => window.removeEventListener("keydown", onKey);
  }, []);

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 text-gray-800">
      {/* Header */}
      <header className="text-center py-12 bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-lg">
        <h1 className="text-4xl font-bold mb-2">Dr. [Sister's Full Name]</h1>
        <p className="text-lg">Pediatrician | MBBS, DNB Pediatrics, DLK</p>
        <p className="text-sm opacity-90 mt-1">
          Ex-Senior Resident, AIIMS Gorakhpur · Greenland Hospital, Gorakhpur (UP)
        </p>
      </header>

      {/* About Me */}
      <section id="about" className="max-w-4xl mx-auto py-16 px-6 text-center">
        <h2 className="text-3xl font-semibold text-gray-900 mb-6">About Me</h2>
        <p className="text-gray-700 leading-relaxed">
          Dedicated pediatrician with experience at AIIMS Gorakhpur and Greenland Hospital Gorakhpur.
          Specialized in providing compassionate care for children and ensuring their healthy development.
        </p>
      </section>

      {/* Testimonials */}
      <section id="testimonials" className="py-16 bg-gradient-to-r from-blue-50 to-blue-100">
        <div className="max-w-4xl mx-auto text-center">
          <h2 className="text-3xl font-semibold text-gray-900 mb-10">What Patients Say</h2>

          <div className="relative overflow-hidden rounded-2xl bg-white shadow">
            {/* Slider rail */}
            <div
              className="flex transition-transform duration-700 ease-in-out"
              style={{ transform: `translateX(-${index * 100}%)` }}
              aria-live="polite"
            >
              {TESTIMONIALS.map((t, i) => (
                <div key={i} className="min-w-full p-8">
                  <p className="text-lg italic text-gray-700">“{t.quote}”</p>
                  <span className="block mt-4 font-semibold text-gray-900">{t.author}</span>
                </div>
              ))}
            </div>

            {/* Slider controls */}
            <button
              onClick={goPrev}
              aria-label="Previous testimonial"
              className="absolute left-3 top-1/2 -translate-y-1/2 rounded-full bg-blue-600/90 px-3 py-1 text-white hover:bg-blue-700"
            >
              ‹
            </button>
            <button
              onClick={goNext}
              aria-label="Next testimonial"
              className="absolute right-3 top-1/2 -translate-y-1/2 rounded-full bg-blue-600/90 px-3 py-1 text-white hover:bg-blue-700"
            >
              ›
            </button>
          </div>

          {/* Dots */}
          <div className="mt-4 flex items-center justify-center gap-2">
            {TESTIMONIALS.map((_, i) => (
              <button
                key={i}
                onClick={() => goTo(i)}
                aria-label={`Go to testimonial ${i + 1}`}
                className={`h-2 rounded-full transition-all ${
                  index === i ? "w-6 bg-blue-600" : "w-2 bg-blue-300"
                }`}
              />
            ))}
          </div>
        </div>
      </section>

      {/* Gallery */}
      <section id="gallery" className="py-16 max-w-6xl mx-auto px-6">
        <h2 className="text-3xl font-semibold text-center text-gray-900 mb-10">Gallery</h2>
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
          {GALLERY.map((g, i) => (
            <img
              key={i}
              src={g.src}
              alt={g.alt}
              className="h-56 w-full rounded-xl object-cover shadow-md transition-transform hover:scale-105 cursor-pointer"
              onClick={() => setModalSrc(g.src)}
            />
          ))}
        </div>

        {/* Modal */}
        {modalSrc && (
          <div
            className="fixed inset-0 z-50 grid place-items-center bg-black/80 p-6"
            onClick={() => setModalSrc(null)}
            role="dialog"
            aria-modal="true"
          >
            <img src={modalSrc} alt="Selected" className="max-h-[80vh] rounded-xl shadow-lg" />
            <button
              className="absolute right-6 top-6 rounded-full bg-white px-3 py-1 text-sm font-semibold text-gray-800"
              onClick={(e) => {
                e.stopPropagation();
                setModalSrc(null);
              }}
            >
              Close
            </button>
          </div>
        )}
      </section>

      {/* Appointment */}
      <section id="appointment" className="py-16 bg-gradient-to-r from-blue-100 to-blue-50">
        <div className="max-w-3xl mx-auto px-6">
          <h2 className="text-3xl font-semibold text-center text-gray-900 mb-10">Book an Appointment</h2>
          <form
            action="https://formspree.io/f/mabcdxyz" /* ← replace with your real Formspree endpoint */
            method="POST"
            className="space-y-6 bg-white p-8 rounded-2xl shadow-lg"
          >
            <input type="text" name="name" placeholder="Full Name" className="w-full border rounded-lg p-3 text-gray-800" required />
            <input type="email" name="email" placeholder="Email Address" className="w-full border rounded-lg p-3 text-gray-800" required />
            <input type="tel" name="phone" placeholder="Phone Number" className="w-full border rounded-lg p-3 text-gray-800" required />
            <input type="date" name="date" className="w-full border rounded-lg p-3 text-gray-800" required />
            <input type="time" name="time" className="w-full border rounded-lg p-3 text-gray-800" required />
            <textarea name="message" rows={4} placeholder="Message" className="w-full border rounded-lg p-3 text-gray-800" />
            <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition">Submit</button>
          </form>
        </div>
      </section>

      {/* Footer */}
      <footer className="text-center py-8 text-sm text-gray-600">
        <p>© 2025 Dr. [Sister's Full Name] · Pediatrician</p>
      </footer>
    </div>
  );
}
